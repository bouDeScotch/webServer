<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>Upload de fichier</title>
<style>
body{
    font-family:sans-serif;
    background:#0f0f0f;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:2rem;
    color:white;
}
form{
    background:#080808;
    padding:2rem;
    border-radius:8px;
    box-shadow:0 4px 10px rgba(255,255,255,.1);
}
input[type=file]{
    margin-bottom:1rem;
}

input {
    background: rgb(30, 130, 30);
    border: none;
    border-radius: 1rem;
    padding: 1em;
    color: white;
    cursor: pointer;
}
button{
    background:rgb(30,130,30);
    color:#fff;
    border:none;
    padding:.5rem 1rem;
    border-radius:5px;
    cursor:pointer;
    margin-left:.5rem;
}
a{
    color:rgb(30,130,30);
    text-decoration:none;
}
a:hover{text-decoration:underline;}
</style>
</head>
<body>
<h1>Partager un fichier</h1>
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
    {% for msg in messages %}
      <li>{{ msg }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
<form method="post" enctype="multipart/form-data">
  <input type="file" name="file" required>
  <input type="submit" value="Uploader">
</form>
{% if file_url %}
<p>Fichier uploadé ! Télécharge-le <a href="{{ file_url }}" target="_blank" id="filelink">{{ file_url }}</a></p>
<button onclick="copyLink()">Copier le lien</button>
<script>
function copyLink() {
  const link = document.getElementById('filelink').href;
  navigator.clipboard.writeText(link).then(()=>alert('Lien copié !'));
}
</script>
{% endif %}
</body>
</html>

